<!DOCTYPE html>
<html>
<meta charset="UTF-8">
<head>
<title>InMoov - Admin Panel</title>
<link rel="icon" href="{{ url_for('static', filename='favicon.ico') }}" />
<script src="https://cdnjs.cloudflare.com/ajax/libs/socket.io/2.0.3/socket.io.js"></script>

</head>

<body>
<center>
<h2>Welcome to InMoov's Admin Panel</h2>
<br>
<p>
Here goes a webpage where we can monitor topics through websocket.
<br><br>
We can also send data to topics from here (through websocket too).
<br><br>
<label><b>Example Topic : </b></label><br>
<textarea id="text_output" rows="5" cols="60" disabled readonly style="resize: none; text-align: center">NOTHING</textarea>
<!-- document.getElementById('text_output').innerHTML = document.getElementById('text_output').innerHTML + "\nMsg 2"-->
</p>
<br><br><br><br>
<a href="{{ url_for('logout') }}" >
<button type="button">Log out !</button>
</a>
<br><br><br><br><br><br>
<p>&copy; 2018 <a href="http://davincibot.org" >DaVinciBot</a> - Equipe PI<sup>2</sup>/PING</p>
</center>

<script> 
socket = io.connect(location.protocol + "//" + location.hostname + ":" + location.port + '/websocket');

socket.on('connect', function () { console.log("Connected to websocket !!"); });

socket.on('pongws', function (msg) {console.log("Received ping reply !" + msg); });
    
socket.on('updatetp', function (msg) {
   console.log("Received from server : " + msg);    
   document.getElementById('text_output').innerHTML = document.getElementById('text_output').innerHTML + '\n' + msg;
     }); 

socket.emit('pingws', 'ping');                                                                             
</script>

</body>
</html>
